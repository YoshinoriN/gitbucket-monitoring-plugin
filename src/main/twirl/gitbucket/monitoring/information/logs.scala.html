@(logs: gitbucket.monitoring.models.Logs)(implicit context: gitbucket.core.controller.Context)
@import context._
@import gitbucket.core.html.main
@import gitbucket.core.admin.html.menu
@import gitbucket.core.view.helpers._
@gitbucket.core.html.main("Monitoring") {
  @gitbucket.core.admin.html.menu("monitoring") {
    <link href="@context.path/plugin-assets/monitoring/style.css" rel="stylesheet">
    @gitbucket.monitoring.html.navigation(context)
      <div id="tabbed-contents" display="none">
        <div>
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
              <a href="#logback-conf" aria-controls="logback-conf" role="tab" data-toggle="tab">LogBack</a>
            </li>
            <li role="presentation">
              <a href="#log" aria-controls="log" role="tab" data-toggle="tab">GitBucket Log</a>
            </li>
          </ul>
        </div>
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane fade in active" id="logback-conf">
            @if(logs.logBack.enableLogging) {
              <div class="panel panel-default">
                <div class="panel-body">
                  <h6><span class="label label-primary">Enable</span></h6><hr>
                  <div class="row">
                    <label class="col-md-2">Config file's path</label>
                    <span class="col-md-10">@logs.logBack.confPath</span>
                  </div>
                  <div class="row">
                    <label class="col-md-2">Log file's path</label>
                    @logs.logBack.logfilePath match {
                      case Left(message) => { <div class="error"> @message </div>}
                      case Right(p) => { <div> @p </div> }
                    }
                  </div>
                </div>
              </div>
              @logs.logBack.xmlContent match {
                case Left(message) => { <div class="error"> @message </div>}
                case Right(s) => { <div><pre class="prettyprint linenums" style="padding-left: 25px;">@s</pre></div> }
              }
            } else {
              <div class="panel panel-default">
                <div class="panel-body">
                  <h6><span class="label label-danger">Disable</span></h6>
                  <div class="row">
                    <label class="col-md-2">Config file's path</label>
                    <span class="col-md-10">@logs.logBack.confPath</span>
                  </div>
                </div>
              </div>
            }
          </div>
          <div role="tabpanel" class="tab-pane fade" id="log">
            @if(logs.logBack.enableLogging) {
              @logs.logBack.logfilePath match {
                case Left(message) => { <div class="error"> @message </div>}
                case Right(p) => {
                  @logs.log(p) match {
                    case Left(message) => { <div class="error"> @message </div>}
                    case Right(s) => { <div><pre class="prettyprint linenums" style="padding-left: 25px;">@s</pre></div> }
                  }
                }
              }
            } else {
              <div class="error"> Disable log setting </div>
            }
          </div>
        </div>
      </div>
  }
}